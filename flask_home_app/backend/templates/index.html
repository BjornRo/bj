{% extends "base.html" %}

{% block header %}
<style>
    .left {
        grid-area: status;
    }

    .middle {
        grid-area: control;
    }

    .right {
        grid-area: extra;
    }

    .grid-container {
        display: grid;
        grid-template-areas:
            'status control right'
            'status control right'
            'status control right';
        grid-gap: 10px;
        padding: 10px;
    }

    .grid-container>div {
        text-align: left;
    }
</style>
{% endblock %}
{% block title %}{{title}}{% endblock %}

{% block content %}
<div class="grid-container">
    <div class="left">
        <div class="card m-2 bg-light " style="width: 12rem;">
            <div class="card-header">
                Air Pressure
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <p id="pressure">{{data[2][2]|round(1)}}</p>hPa
                </li>
            </ul>
        </div>
        <div class="card m-2 bg-light" style="width: 12rem;">
            <div class="card-header ">
                Humidity
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <p id="humid">{{data[2][1]|round(1)}}</p>%
                </li>
            </ul>
        </div>
        <div class="card m-2 bg-light" style="width: 12rem;">
            <div class="card-header">
                Temperatures
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">Kitchen: <p id="ktemp">{{data[2][0]|round(1)}}</p>°C</li>
                <li class="list-group-item">Balcony: <p id="btemp">{{data[1][1]|round(1)}}</p>°C</li>
                <li class="list-group-item">Outdoors: <p id="otemp">{{data[3]|round(1)}}</p>°C</li>
            </ul>
        </div>
    </div>
    <div class="middle">
        Hello
    </div>
    <div class="right"></div>
</div>

{% endblock %}
{% block script %}
<script type="text/javascript">
    setInterval(function () {
        $.getJSON("{{ url_for('views.home_status') }}", function (data) {
            document.getElementById("pressure").innerHTML = Math.round(data['kitchen/temphumidpress'][2] * 10) / 10;
            document.getElementById("humid").innerHTML = Math.round(data['kitchen/temphumidpress'][1] * 10) / 10;
            document.getElementById("ktemp").innerHTML = Math.round(data['kitchen/temphumidpress'][0] * 10) / 10;
            document.getElementById("btemp").innerHTML = Math.round(data['balcony/temphumid'][0] * 10) / 10;
            document.getElementById("otemp").innerHTML = Math.round(data['bikeroom/temp'] * 10) / 10;
        });
    }, 5000);
</script>
{% endblock %}